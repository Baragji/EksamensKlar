<!DOCTYPE html>
<html lang="da" class="smooth-scroll">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🤖 AI Assistant - ExamKlar ✨</title>
    <link rel="stylesheet" href="../../styles/global.css">
    <link rel="stylesheet" href="../../styles/components.css">
    <link rel="stylesheet" href="../../styles/premium.css">
    <link rel="stylesheet" href="ai-assistant.css">
</head>
<body class="gpu-accelerated">
    <!-- Skip to Content Link -->
    <a href="#main-content" class="skip-link">Spring til hovedindhold</a>
    
    <!-- Dark Mode Toggle -->
    <button class="theme-toggle" id="themeToggle" aria-label="Skift til mørk/lys tilstand" title="Skift tema">
        <span id="themeIcon">🌙</span>
    </button>
    
    <!-- Ultra-Premium Navigation -->
    <header class="nav-luxury">
        <nav class="nav container" role="navigation" aria-label="Hovednavigation">
            <div class="nav-brand">
                <div class="logo text-gradient glow">✨ ExamKlar</div>
                <span class="badge-luxury" aria-label="AI Assistant">AI Assistant</span>
            </div>
            <div class="nav-actions">
                <a href="../../index.html" class="btn-luxury-small" aria-label="Tilbage til forside">
                    <span class="icon">🏠</span>
                    Forside
                </a>
                <a href="../dashboard/index.html" class="btn-luxury-small">
                    <span class="icon">📊</span>
                    Dashboard
                </a>
                <a href="../subjects/index.html" class="btn-luxury-small">
                    <span class="icon">📚</span>
                    Emner
                </a>
            </div>
        </nav>
    </header>

    <main class="main" id="main-content">
        <div class="container container-responsive">
            <!-- Hero Section -->
            <section class="luxury-section" role="banner" aria-labelledby="ai-title">
                <div class="luxury-card float">
                    <div class="hero-content">
                        <h1 id="ai-title" class="section-title text-gradient glow">
                            🤖 AI Assistant
                        </h1>
                        <p class="hero-subtitle">
                            Din personlige AI-tutor til eksamensforberedelse med avanceret maskinlæring og adaptiv intelligence.
                        </p>
                        
                        <div class="ai-status-container">
                            <div class="ai-status luxury-card" id="ai-status" role="status" aria-live="polite">
                                <div class="status-indicator online" id="status-indicator" aria-hidden="true">
                                    <div class="pulse-ring"></div>
                                    <div class="pulse-ring delay-1"></div>
                                </div>
                                <span id="status-text" class="text-gradient">AI Services Online</span>
                            </div>
                        </div>
                        
                        <div class="feature-preview">
                            <div class="preview-card luxury-card float">
                                <span class="preview-icon">🧠</span>
                                <span class="preview-text">Deep Learning</span>
                            </div>
                            <div class="preview-card luxury-card float" style="animation-delay: 0.2s;">
                                <span class="preview-icon">⚡</span>
                                <span class="preview-text">Instant Response</span>
                            </div>
                            <div class="preview-card luxury-card float" style="animation-delay: 0.4s;">
                                <span class="preview-icon">🎯</span>
                                <span class="preview-text">Personalized</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Quick Actions -->
            <section class="luxury-section">
                <h2 class="section-title text-gradient">⚡ Quick Actions</h2>
                <div class="grid grid-responsive grid-4">
                    <button class="luxury-card card-hover float" onclick="openChat()" aria-label="Chat with AI">
                        <div class="card-content">
                            <span class="card-icon">💬</span>
                            <h3 class="card-title">Chat with AI</h3>
                            <p class="card-description">Still spørgsmål om dit fag</p>
                        </div>
                    </button>
                    
                    <button class="luxury-card card-hover float" onclick="getSmartFeedback()" aria-label="Get smart feedback" style="animation-delay: 0.1s;">
                        <div class="card-content">
                            <span class="card-icon">💡</span>
                            <h3 class="card-title">Smart Feedback</h3>
                            <p class="card-description">Få AI-forklaringer til quiz svar</p>
                        </div>
                    </button>
                    
                    <button class="luxury-card card-hover float" onclick="getLearningPath()" aria-label="Get learning path" style="animation-delay: 0.2s;">
                        <div class="card-content">
                            <span class="card-icon">🎯</span>
                            <h3 class="card-title">Learning Path</h3>
                            <p class="card-description">Personaliserede studieforslag</p>
                        </div>
                    </button>
                    
                    <button class="luxury-card card-hover float" onclick="getPerformanceInsights()" aria-label="View performance insights" style="animation-delay: 0.3s;">
                        <div class="card-content">
                            <span class="card-icon">📈</span>
                            <h3 class="card-title">Performance Insights</h3>
                            <p class="card-description">Analyser din læringsfremgang</p>
                        </div>
                    </button>
                </div>
            </section>

            <!-- AI Capabilities -->
            <section class="luxury-section">
                <h2 class="section-title text-gradient">🧠 AI Capabilities</h2>
                <div class="grid grid-responsive grid-2">
                    <div class="luxury-card float">
                        <div class="card-content">
                            <div class="capability-header">
                                <span class="capability-icon">🔬</span>
                                <h3 class="card-title">Subject Expert</h3>
                            </div>
                            <p class="card-description">Dyb viden inden for dit fagområde og problemløsning</p>
                            <ul class="feature-list">
                                <li>✨ Strukturelle koncepter</li>
                                <li>✨ Metodiske principper</li>
                                <li>✨ Fejlfinding og guidance</li>
                                <li>✨ Metode optimering</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="luxury-card float" style="animation-delay: 0.1s;">
                        <div class="card-content">
                            <div class="capability-header">
                                <span class="capability-icon">🎓</span>
                                <h3 class="card-title">Personal Tutor</h3>
                            </div>
                            <p class="card-description">Adaptiv undervisning der tilpasser sig din læringsstil</p>
                            <ul class="feature-list">
                                <li>✨ Personaliserede forklaringer</li>
                                <li>✨ Kontekstuel feedback</li>
                                <li>✨ Sværhedsgrad tilpasning</li>
                                <li>✨ Fremgang tracking</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="luxury-card float" style="animation-delay: 0.2s;">
                        <div class="card-content">
                            <div class="capability-header">
                                <span class="capability-icon">🧪</span>
                                <h3 class="card-title">Lab Assistant</h3>
                            </div>
                            <p class="card-description">Praktisk hjælp med procedurer og protokoller</p>
                            <ul class="feature-list">
                                <li>✨ Step-by-step vejledning</li>
                                <li>✨ Sikkerhedsanbefalinger</li>
                                <li>✨ Resultat fortolkning</li>
                                <li>✨ Kvalitetskontrol</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="luxury-card float" style="animation-delay: 0.3s;">
                        <div class="card-content">
                            <div class="capability-header">
                                <span class="capability-icon">📋</span>
                                <h3 class="card-title">Study Strategist</h3>
                            </div>
                            <p class="card-description">Intelligente studiestrategier baseret på din fremgang</p>
                            <ul class="feature-list">
                                <li>✨ Læringsti optimering</li>
                                <li>✨ Svaghedsområde identifikation</li>
                                <li>✨ Revision planlægning</li>
                                <li>✨ Eksamen forberedelse</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Recent Conversations -->
            <section class="luxury-section" id="recent-conversations" style="display: none;">
                <h2 class="section-title text-gradient">💬 Recent Conversations</h2>
                <div class="luxury-card">
                    <div class="conversation-list" id="conversation-list">
                        <!-- Conversations will be loaded here -->
                        <div class="empty-state">
                            <div class="empty-icon">💬</div>
                            <h3>Ingen samtaler endnu</h3>
                            <p>Start en samtale med AI'en for at se din historik her</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- AI Settings -->
            <section class="luxury-section">
                <h2 class="section-title text-gradient">⚙️ AI Settings</h2>
                <div class="grid grid-responsive grid-3">
                    <div class="luxury-card float">
                        <div class="card-content">
                            <div class="setting-header">
                                <span class="setting-icon">🔗</span>
                                <h3 class="card-title">AI Provider</h3>
                            </div>
                            <select id="ai-provider" class="form-input" onchange="updateAIProvider()" aria-label="Choose AI provider">
                                <option value="hybrid">Hybrid (Anbefalet)</option>
                                <option value="openai">OpenAI GPT-4</option>
                                <option value="local">Local AI (Gratis)</option>
                                <option value="disabled">Deaktiveret</option>
                            </select>
                            <p class="setting-description">Vælg din foretrukne AI backend</p>
                        </div>
                    </div>
                    
                    <div class="luxury-card float" style="animation-delay: 0.1s;">
                        <div class="card-content">
                            <div class="setting-header">
                                <span class="setting-icon">🎨</span>
                                <h3 class="card-title">Response Style</h3>
                            </div>
                            <select id="response-style" class="form-input" onchange="updateResponseStyle()" aria-label="Choose response style">
                                <option value="detailed">Detaljeret & Uddannende</option>
                                <option value="concise">Hurtig & Koncis</option>
                                <option value="conversational">Samtale</option>
                                <option value="technical">Teknisk & Præcis</option>
                            </select>
                            <p class="setting-description">Juster hvordan AI svarer dig</p>
                        </div>
                    </div>
                    
                    <div class="luxury-card float" style="animation-delay: 0.2s;">
                        <div class="card-content">
                            <div class="setting-header">
                                <span class="setting-icon">🛡️</span>
                                <h3 class="card-title">Privacy Mode</h3>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="privacy-mode" onchange="updatePrivacyMode()" aria-label="Enable privacy mode">
                                <span class="toggle-slider"></span>
                            </label>
                            <p class="setting-description">Brug kun lokal AI behandling</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- API Configuration -->
            <section class="luxury-section" id="api-config" style="display: none;">
                <h2 class="section-title text-gradient">🔑 API Configuration</h2>
                <div class="luxury-card">
                    <div class="card-content">
                        <div class="form-group">
                            <label for="openai-key" class="form-label">OpenAI API Key:</label>
                            <input type="password" id="openai-key" class="form-input" placeholder="sk-..." onchange="saveAPIKey()" aria-describedby="api-key-help">
                            <p id="api-key-help" class="setting-description">Din API nøgle gemmes lokalt og sendes aldrig til vores servere</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <a href="../../index.html" class="nav-item">
            <span class="nav-icon">🏠</span>
            <span class="nav-label">Hjem</span>
        </a>
        <a href="../subjects/index.html" class="nav-item">
            <span class="nav-icon">📚</span>
            <span class="nav-label">Emner</span>
        </a>
        <a href="../flashcards/index.html" class="nav-item">
            <span class="nav-icon">🗂️</span>
            <span class="nav-label">Flashcards</span>
        </a>
        <button class="nav-item active">
            <span class="nav-icon">🤖</span>
            <span class="nav-label">AI Assistant</span>
        </button>
    </nav>

    <!-- Background Elements -->
    <div class="background-elements">
        <div class="floating-element" style="--delay: 0s; --duration: 20s;">🤖</div>
        <div class="floating-element" style="--delay: 5s; --duration: 25s;">🧠</div>
        <div class="floating-element" style="--delay: 10s; --duration: 30s;">⚡</div>
        <div class="floating-element" style="--delay: 15s; --duration: 22s;">💡</div>
    </div>

    <script>
        // Dark Mode Toggle System
        function initializeDarkMode() {
            const themeToggle = document.getElementById('themeToggle');
            const themeIcon = document.getElementById('themeIcon');
            
            const savedTheme = localStorage.getItem('examklar-theme');
            const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const currentTheme = savedTheme || (systemPrefersDark ? 'dark' : 'light');
            
            document.documentElement.setAttribute('data-theme', currentTheme);
            updateThemeIcon(currentTheme);
            
            themeToggle?.addEventListener('click', () => {
                const current = document.documentElement.getAttribute('data-theme');
                const newTheme = current === 'dark' ? 'light' : 'dark';
                
                document.documentElement.setAttribute('data-theme', newTheme);
                localStorage.setItem('examklar-theme', newTheme);
                updateThemeIcon(newTheme);
                
                themeToggle.style.transform = 'scale(0.8)';
                setTimeout(() => themeToggle.style.transform = 'scale(1)', 150);
            });
        }
        
        function updateThemeIcon(theme) {
            const themeIcon = document.getElementById('themeIcon');
            if (themeIcon) {
                themeIcon.textContent = theme === 'dark' ? '☀️' : '🌙';
            }
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            initializeDarkMode();
        });
    </script>

    <script src="../../core/utils.js"></script>
    <script src="../../core/data-bridge.js"></script>
    <script src="ai-assistant.js"></script>
</body>
</html>