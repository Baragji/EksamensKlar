<!DOCTYPE html>
<html lang="da" class="smooth-scroll">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Features - ExamKlar ✨</title>
    <link rel="stylesheet" href="../../styles/global.css">
    <link rel="stylesheet" href="../../styles/components.css">
    <link rel="stylesheet" href="../../styles/premium.css">
    <link rel="stylesheet" href="advanced.css">
</head>
<body class="gpu-accelerated">
    <!-- Skip to Content Link -->
    <a href="#main-content" class="skip-link">Spring til hovedindhold</a>
    
    <!-- Dark Mode Toggle -->
    <button class="theme-toggle" id="themeToggle" aria-label="Skift til mørk/lys tilstand" title="Skift tema">
        <span id="themeIcon">🌙</span>
    </button>
    
    <!-- Ultra-Premium Navigation -->
    <header class="nav-luxury">
        <nav class="nav container" role="navigation" aria-label="Hovednavigation">
            <div class="nav-brand">
                <div class="logo text-gradient glow">✨ ExamKlar</div>
                <span class="badge-luxury" aria-label="Advanced Features">Advanced</span>
            </div>
            <div class="nav-actions">
                <a href="../../index.html" class="btn-luxury-small" aria-label="Tilbage til forside">
                    <span class="icon">🏠</span>
                    Forside
                </a>
                <a href="../dashboard/index.html" class="btn-luxury-small">
                    <span class="icon">📊</span>
                    Dashboard
                </a>
                <a href="../subjects/index.html" class="btn-luxury-small">
                    <span class="icon">📚</span>
                    Emner
                </a>
            </div>
        </nav>
    </header>

    <main class="main" id="main-content">
        <div class="container container-responsive">
            <!-- Hero Section -->
            <section class="luxury-section" role="banner" aria-labelledby="advanced-title">
                <div class="luxury-card float">
                    <div class="hero-content">
                        <h1 id="advanced-title" class="section-title text-gradient glow">
                            🌟 Advanced Features
                        </h1>
                        <p class="hero-subtitle">
                            Kraftfulde værktøjer og tilpasningsmuligheder til avancerede brugere med professionelle funktioner.
                        </p>
                        
                        <div class="feature-preview">
                            <div class="preview-card luxury-card float">
                                <span class="preview-icon">📤</span>
                                <span class="preview-text">Export/Import</span>
                            </div>
                            <div class="preview-card luxury-card float" style="animation-delay: 0.2s;">
                                <span class="preview-icon">🔍</span>
                                <span class="preview-text">Global Search</span>
                            </div>
                            <div class="preview-card luxury-card float" style="animation-delay: 0.4s;">
                                <span class="preview-icon">🎨</span>
                                <span class="preview-text">Customization</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Advanced Tools -->
            <section class="luxury-section">
                <h2 class="section-title text-gradient">⚡ Advanced Tools</h2>
                <div class="grid grid-responsive grid-3">
                    <button class="luxury-card card-hover float" onclick="openExportModal()" aria-label="Export and backup">
                        <div class="card-content">
                            <span class="card-icon">📤</span>
                            <h3 class="card-title">Export & Backup</h3>
                            <p class="card-description">Eksporter al din data til backup eller deling</p>
                        </div>
                    </button>

                    <button class="luxury-card card-hover float" onclick="openImportModal()" aria-label="Import and restore" style="animation-delay: 0.1s;">
                        <div class="card-content">
                            <span class="card-icon">📥</span>
                            <h3 class="card-title">Import & Restore</h3>
                            <p class="card-description">Importer data fra backup filer eller andre kilder</p>
                        </div>
                    </button>

                    <button class="luxury-card card-hover float" onclick="openSearchModal()" aria-label="Global search" style="animation-delay: 0.2s;">
                        <div class="card-content">
                            <span class="card-icon">🔍</span>
                            <h3 class="card-title">Global Search</h3>
                            <p class="card-description">Søg på tværs af alt dit indhold og flashcards</p>
                        </div>
                    </button>

                    <button class="luxury-card card-hover float" onclick="openAnalyticsModal()" aria-label="Learning analytics" style="animation-delay: 0.3s;">
                        <div class="card-content">
                            <span class="card-icon">📈</span>
                            <h3 class="card-title">Learning Analytics</h3>
                            <p class="card-description">Dybdegående analyser af din læringsfremgang</p>
                        </div>
                    </button>

                    <button class="luxury-card card-hover float" onclick="openCustomizationModal()" aria-label="Customization" style="animation-delay: 0.4s;">
                        <div class="card-content">
                            <span class="card-icon">🎨</span>
                            <h3 class="card-title">Customization</h3>
                            <p class="card-description">Tilpas interfacet efter dine præferencer</p>
                        </div>
                    </button>

                    <button class="luxury-card card-hover float" onclick="openIntegrationsModal()" aria-label="Integrations" style="animation-delay: 0.5s;">
                        <div class="card-content">
                            <span class="card-icon">🔗</span>
                            <h3 class="card-title">Integrations</h3>
                            <p class="card-description">Forbind med eksterne værktøjer og tjenester</p>
                        </div>
                    </button>
                </div>
            </section>

            <!-- Theme & Appearance -->
            <section class="luxury-section">
                <h2 class="section-title text-gradient">🎨 Theme & Appearance</h2>
                <div class="grid grid-responsive grid-2">
                    <div class="luxury-card float">
                        <div class="card-content">
                            <div class="setting-header">
                                <span class="setting-icon">🌙</span>
                                <h3 class="card-title">Dark Mode</h3>
                            </div>
                            <p class="card-description">Skift mellem lys og mørk tilstand</p>
                            <div class="button-group">
                                <button class="btn-luxury-outline" onclick="setTheme('light')">☀️ Light</button>
                                <button class="btn-luxury-outline" onclick="setTheme('dark')">🌙 Dark</button>
                                <button class="btn-luxury-outline" onclick="setTheme('auto')">🔄 Auto</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="luxury-card float" style="animation-delay: 0.1s;">
                        <div class="card-content">
                            <div class="setting-header">
                                <span class="setting-icon">🌍</span>
                                <h3 class="card-title">Language Settings</h3>
                            </div>
                            <p class="card-description">Vælg dit foretrukne sprog</p>
                            <div class="button-group">
                                <button class="btn-luxury-outline" onclick="setLanguage('da')">🇩🇰 Dansk</button>
                                <button class="btn-luxury-outline" onclick="setLanguage('en')">🇺🇸 English</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Test Features -->
            <section class="luxury-section">
                <h2 class="section-title text-gradient">🧪 Test Advanced Features</h2>
                <div class="luxury-card">
                    <div class="card-content">
                        <p class="card-description">Brug linkene nedenfor til at teste alle avancerede funktioner:</p>
                        <div class="grid grid-responsive grid-3">
                            <a href="tests/export-test.html" class="btn-luxury">
                                <span class="icon">📤</span>
                                Export/Import Tests
                            </a>
                            <a href="tests/darkmode-test.html" class="btn-luxury">
                                <span class="icon">🌙</span>
                                Dark Mode Tests
                            </a>
                            <a href="tests/search-test.html" class="btn-luxury">
                                <span class="icon">🔍</span>
                                Search Tests
                            </a>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <a href="../../index.html" class="nav-item">
            <span class="nav-icon">🏠</span>
            <span class="nav-label">Hjem</span>
        </a>
        <a href="../subjects/index.html" class="nav-item">
            <span class="nav-icon">📚</span>
            <span class="nav-label">Emner</span>
        </a>
        <a href="../ai-assistant/index.html" class="nav-item">
            <span class="nav-icon">🤖</span>
            <span class="nav-label">AI Assistant</span>
        </a>
        <button class="nav-item active">
            <span class="nav-icon">🌟</span>
            <span class="nav-label">Advanced</span>
        </button>
    </nav>

    <!-- Export Modal -->
    <div id="exportModal" class="modal" style="display: none;">
        <div class="modal-overlay" onclick="closeModal('exportModal')"></div>
        <div class="modal-content luxury-card">
            <div class="modal-header">
                <h2 class="text-gradient">📤 Export Data</h2>
                <button class="modal-close" onclick="closeModal('exportModal')" aria-label="Luk modal">&times;</button>
            </div>
            
            <div class="modal-body">
                <h3>Vælg Data til Export</h3>
                <div class="button-group">
                    <button class="btn-luxury" onclick="exportAllData()">Export All Data</button>
                    <button class="btn-luxury-outline" onclick="exportContent()">Content Only</button>
                    <button class="btn-luxury-outline" onclick="exportFlashcards()">Flashcards Only</button>
                    <button class="btn-luxury-outline" onclick="exportQuizzes()">Quizzes Only</button>
                </div>
                
                <div id="exportStatus"></div>
                
                <h3>Export Preview</h3>
                <textarea id="exportData" class="form-input" readonly placeholder="Export data will appear here..." rows="8"></textarea>
                
                <div class="button-group">
                    <button class="btn-luxury" onclick="downloadExport()">
                        <span class="icon">💾</span>
                        Download as File
                    </button>
                    <button class="btn-luxury-outline" onclick="copyToClipboard('exportData')">
                        <span class="icon">📋</span>
                        Copy to Clipboard
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Import Modal -->
    <div id="importModal" class="modal" style="display: none;">
        <div class="modal-overlay" onclick="closeModal('importModal')"></div>
        <div class="modal-content luxury-card">
            <div class="modal-header">
                <h2 class="text-gradient">📥 Import Data</h2>
                <button class="modal-close" onclick="closeModal('importModal')" aria-label="Luk modal">&times;</button>
            </div>
            
            <div class="modal-body">
                <h3>Import from File</h3>
                <input type="file" id="importFile" class="form-input" accept=".json" onchange="handleFileImport(event)">
                
                <h3>Or Paste Data</h3>
                <textarea id="importData" class="form-input" placeholder="Paste your export data here..." rows="8"></textarea>
                
                <div id="importStatus"></div>
                
                <div class="button-group">
                    <button class="btn-luxury" onclick="importData()">
                        <span class="icon">📥</span>
                        Import Data
                    </button>
                    <button class="btn-luxury-outline" onclick="validateImportData()">
                        <span class="icon">✅</span>
                        Validate Data
                    </button>
                    <button class="btn-luxury-outline btn-danger" onclick="clearImportData()">
                        <span class="icon">🗑️</span>
                        Clear
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Search Modal -->
    <div id="searchModal" class="modal" style="display: none;">
        <div class="modal-overlay" onclick="closeModal('searchModal')"></div>
        <div class="modal-content luxury-card">
            <div class="modal-header">
                <h2 class="text-gradient">🔍 Global Search</h2>
                <button class="modal-close" onclick="closeModal('searchModal')" aria-label="Luk modal">&times;</button>
            </div>
            
            <div class="modal-body">
                <input type="text" class="form-input" id="globalSearchInput" 
                       placeholder="Search across all content..." 
                       oninput="performGlobalSearch(this.value)">
                
                <div class="search-filters">
                    <button class="filter-chip active" id="filter-all" onclick="toggleFilter('all')">All</button>
                    <button class="filter-chip" id="filter-content" onclick="toggleFilter('content')">Content</button>
                    <button class="filter-chip" id="filter-flashcards" onclick="toggleFilter('flashcards')">Flashcards</button>
                    <button class="filter-chip" id="filter-quiz" onclick="toggleFilter('quiz')">Quizzes</button>
                    <button class="filter-chip" id="filter-notes" onclick="toggleFilter('notes')">Notes</button>
                </div>
                
                <div class="search-results luxury-card" id="globalSearchResults">
                    <div class="search-result-item">
                        <div class="result-title">Start typing to search...</div>
                        <div class="result-snippet">Search across all your ExamKlar content</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Background Elements -->
    <div class="background-elements">
        <div class="floating-element" style="--delay: 0s; --duration: 20s;">🌟</div>
        <div class="floating-element" style="--delay: 5s; --duration: 25s;">🔍</div>
        <div class="floating-element" style="--delay: 10s; --duration: 30s;">📤</div>
        <div class="floating-element" style="--delay: 15s; --duration: 22s;">🎨</div>
    </div>

    <script>
        // Dark Mode Toggle System
        function initializeDarkMode() {
            const themeToggle = document.getElementById('themeToggle');
            const themeIcon = document.getElementById('themeIcon');
            
            const savedTheme = localStorage.getItem('examklar-theme');
            const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const currentTheme = savedTheme || (systemPrefersDark ? 'dark' : 'light');
            
            document.documentElement.setAttribute('data-theme', currentTheme);
            updateThemeIcon(currentTheme);
            
            themeToggle?.addEventListener('click', () => {
                const current = document.documentElement.getAttribute('data-theme');
                const newTheme = current === 'dark' ? 'light' : 'dark';
                
                document.documentElement.setAttribute('data-theme', newTheme);
                localStorage.setItem('examklar-theme', newTheme);
                updateThemeIcon(newTheme);
                
                themeToggle.style.transform = 'scale(0.8)';
                setTimeout(() => themeToggle.style.transform = 'scale(1)', 150);
            });
        }
        
        function updateThemeIcon(theme) {
            const themeIcon = document.getElementById('themeIcon');
            if (themeIcon) {
                themeIcon.textContent = theme === 'dark' ? '☀️' : '🌙';
            }
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            initializeDarkMode();
        });
    </script>

    <script src="../../core/utils.js"></script>
    <script src="../../core/data-bridge.js"></script>
    <script src="advanced.js"></script>
</body>
</html>